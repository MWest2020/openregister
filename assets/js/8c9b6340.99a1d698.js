"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[972],{2293:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"developers/object-handlers","title":"Object Handlers","description":"The OpenRegister application uses a set of specialized handler classes to manage different aspects of object operations. Each handler is responsible for a specific type of operation, following the Single Responsibility Principle.","source":"@site/docs/developers/object-handlers.md","sourceDirName":"developers","slug":"/developers/object-handlers","permalink":"/docs/developers/object-handlers","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/developers/object-handlers.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Making Notes Stick","permalink":"/docs/UseCases/notes"},"next":{"title":"Object Handling","permalink":"/docs/developers/object-handling"}}');var l=i(4848),r=i(8453);const a={},s="Object Handlers",c={},d=[{value:"Handler Overview",id:"handler-overview",level:2},{value:"GetObject Handler",id:"getobject-handler",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Main Methods",id:"main-methods",level:3},{value:"SaveObject Handler",id:"saveobject-handler",level:2},{value:"Key Features",id:"key-features-1",level:3},{value:"Main Methods",id:"main-methods-1",level:3},{value:"DeleteObject Handler",id:"deleteobject-handler",level:2},{value:"Key Features",id:"key-features-2",level:3},{value:"Main Methods",id:"main-methods-2",level:3},{value:"ValidateObject Handler",id:"validateobject-handler",level:2},{value:"Key Features",id:"key-features-3",level:3},{value:"Main Methods",id:"main-methods-3",level:3},{value:"RenderObject Handler",id:"renderobject-handler",level:2},{value:"Key Features",id:"key-features-4",level:3},{value:"Main Methods",id:"main-methods-4",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Getting Objects",id:"getting-objects",level:3},{value:"Saving Objects",id:"saving-objects",level:3},{value:"Deleting Objects",id:"deleting-objects",level:3},{value:"Validating Objects",id:"validating-objects",level:3},{value:"Rendering Objects",id:"rendering-objects",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Configuration",id:"configuration",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"object-handlers",children:"Object Handlers"})}),"\n",(0,l.jsx)(n.p,{children:"The OpenRegister application uses a set of specialized handler classes to manage different aspects of object operations. Each handler is responsible for a specific type of operation, following the Single Responsibility Principle."}),"\n",(0,l.jsx)(n.h2,{id:"handler-overview",children:"Handler Overview"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ObjectHandlers/\n\u251c\u2500\u2500 DeleteObject.php\n\u251c\u2500\u2500 GetObject.php\n\u251c\u2500\u2500 RenderObject.php\n\u251c\u2500\u2500 SaveObject.php\n\u2514\u2500\u2500 ValidateObject.php\n"})}),"\n",(0,l.jsx)(n.h2,{id:"getobject-handler",children:"GetObject Handler"}),"\n",(0,l.jsx)(n.p,{children:"Responsible for retrieving objects from the system."}),"\n",(0,l.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Finding objects by UUID"}),"\n",(0,l.jsx)(n.li,{children:"Retrieving multiple objects"}),"\n",(0,l.jsx)(n.li,{children:"Handling pagination"}),"\n",(0,l.jsx)(n.li,{children:"Managing file information"}),"\n",(0,l.jsx)(n.li,{children:"Finding related objects"}),"\n",(0,l.jsx)(n.li,{children:"Retrieving object logs"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"main-methods",children:"Main Methods"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function findByUuid(string $uuid): ?ObjectEntity\npublic function getObject(Register $register, Schema $schema, string $uuid): ObjectEntity\npublic function findMultiple(array $ids, ?array $extend = [], bool $files = false): array\npublic function findAll(?int $limit = null, ?int $offset = null, array $filters = []): array\npublic function findRelated(ObjectEntity $object): array\npublic function findLogs(ObjectEntity $object): array\n"})}),"\n",(0,l.jsx)(n.h2,{id:"saveobject-handler",children:"SaveObject Handler"}),"\n",(0,l.jsx)(n.p,{children:"Handles object persistence operations."}),"\n",(0,l.jsx)(n.h3,{id:"key-features-1",children:"Key Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Creating new objects"}),"\n",(0,l.jsx)(n.li,{children:"Updating existing objects"}),"\n",(0,l.jsx)(n.li,{children:"Managing object metadata"}),"\n",(0,l.jsx)(n.li,{children:"Handling file attachments"}),"\n",(0,l.jsx)(n.li,{children:"Setting default values"}),"\n",(0,l.jsx)(n.li,{children:"Managing object relations"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"main-methods-1",children:"Main Methods"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function saveObject(\n    Register|int|string $register,\n    Schema|int|string $schema,\n    array $object,\n    ?int $depth = null\n): ObjectEntity\n"})}),"\n",(0,l.jsx)(n.h2,{id:"deleteobject-handler",children:"DeleteObject Handler"}),"\n",(0,l.jsx)(n.p,{children:"Manages object deletion operations."}),"\n",(0,l.jsx)(n.h3,{id:"key-features-2",children:"Key Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Deleting single objects"}),"\n",(0,l.jsx)(n.li,{children:"Cascading deletes"}),"\n",(0,l.jsx)(n.li,{children:"File cleanup"}),"\n",(0,l.jsx)(n.li,{children:"Maintaining referential integrity"}),"\n",(0,l.jsx)(n.li,{children:"Tracking deletion operations"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"main-methods-2",children:"Main Methods"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function deleteObject(\n    Register|int|string $register,\n    Schema|int|string $schema,\n    string $uuid,\n    ?string $originalObjectId = null\n): bool\n"})}),"\n",(0,l.jsx)(n.h2,{id:"validateobject-handler",children:"ValidateObject Handler"}),"\n",(0,l.jsx)(n.p,{children:"Handles object validation against schemas."}),"\n",(0,l.jsx)(n.h3,{id:"key-features-3",children:"Key Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"JSON Schema validation"}),"\n",(0,l.jsx)(n.li,{children:"Custom validation rules"}),"\n",(0,l.jsx)(n.li,{children:"Schema resolution"}),"\n",(0,l.jsx)(n.li,{children:"Error formatting"}),"\n",(0,l.jsx)(n.li,{children:"Format validation"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"main-methods-3",children:"Main Methods"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function validateObject(array $object, Schema|int|string $schema): ValidationResult\npublic function resolveSchema(string $uri): array\n"})}),"\n",(0,l.jsx)(n.h2,{id:"renderobject-handler",children:"RenderObject Handler"}),"\n",(0,l.jsx)(n.p,{children:"Manages object presentation and transformation."}),"\n",(0,l.jsx)(n.h3,{id:"key-features-4",children:"Key Features"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Converting objects to JSON"}),"\n",(0,l.jsx)(n.li,{children:"Handling property extensions"}),"\n",(0,l.jsx)(n.li,{children:"Managing render depth"}),"\n",(0,l.jsx)(n.li,{children:"Field filtering"}),"\n",(0,l.jsx)(n.li,{children:"Property formatting"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"main-methods-4",children:"Main Methods"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"public function renderEntity(\n    ObjectEntity $entity,\n    ?array $extend = [],\n    ?int $depth = null,\n    ?array $filter = [],\n    ?array $fields = []\n): array\n"})}),"\n",(0,l.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,l.jsx)(n.h3,{id:"getting-objects",children:"Getting Objects"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// Find by UUID\n$object = $getHandler->findByUuid($uuid);\n\n// Get with context\n$object = $getHandler->getObject($register, $schema, $uuid);\n\n// Find multiple\n$objects = $getHandler->findMultiple(['uuid1', 'uuid2']);\n\n// Find all with filters\n$objects = $getHandler->findAll(\n    limit: 10,\n    offset: 0,\n    filters: ['status' => 'active']\n);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"saving-objects",children:"Saving Objects"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// Save new object\n$object = $saveHandler->saveObject(\n    register: $register,\n    schema: $schema,\n    object: [\n        'name' => 'Test Object',\n        'status' => 'active'\n    ]\n);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"deleting-objects",children:"Deleting Objects"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// Delete object\n$success = $deleteHandler->deleteObject(\n    register: $register,\n    schema: $schema,\n    uuid: $uuid\n);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"validating-objects",children:"Validating Objects"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// Validate object\n$result = $validateHandler->validateObject(\n    object: $data,\n    schema: $schema\n);\n\nif (!$result->isValid()) {\n    $errors = $result->getErrors();\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"rendering-objects",children:"Rendering Objects"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// Render object\n$rendered = $renderHandler->renderEntity(\n    entity: $object,\n    extend: ['relations'],\n    depth: 2,\n    filter: ['status' => 'active'],\n    fields: ['id', 'name', 'status']\n);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Use type hints consistently"}),"\n",(0,l.jsx)(n.li,{children:"Handle errors appropriately"}),"\n",(0,l.jsx)(n.li,{children:"Validate input data"}),"\n",(0,l.jsx)(n.li,{children:"Use appropriate handlers for each operation"}),"\n",(0,l.jsx)(n.li,{children:"Consider performance implications"}),"\n",(0,l.jsx)(n.li,{children:"Maintain proper separation of concerns"}),"\n",(0,l.jsx)(n.li,{children:"Document handler behavior"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"try {\n    $object = $getHandler->findByUuid($uuid);\n} catch (DoesNotExistException $e) {\n    // Handle not found\n} catch (Exception $e) {\n    // Handle other errors\n}\n\ntry {\n    $result = $validateHandler->validateObject($data, $schema);\n    if (!$result->isValid()) {\n        // Handle validation errors\n    }\n} catch (Exception $e) {\n    // Handle validation exception\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsx)(n.p,{children:"Each handler typically requires specific dependencies:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// GetObject\n- ObjectEntityMapper\n- FileService\n\n// SaveObject\n- ObjectEntityMapper\n- FileService\n- IUserSession\n\n// DeleteObject\n- ObjectEntityMapper\n- FileService\n\n// ValidateObject\n- IURLGenerator\n- IAppConfig\n\n// RenderObject\n- IURLGenerator\n- FileService\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.p,{children:"Handlers can be configured through dependency injection in your application's service container:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-php",children:"// Example service configuration\nservices:\n    OCA\\OpenRegister\\Service\\ObjectHandlers\\GetObject:\n        arguments:\n            - '@OCA\\OpenRegister\\Db\\ObjectEntityMapper'\n            - '@OCA\\OpenRegister\\Service\\FileService'\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var t=i(6540);const l={},r=t.createContext(l);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkopen_register_docs=self.webpackChunkopen_register_docs||[]).push([[371],{5680:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>y});var n=a(6540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),g=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=g(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=g(a),u=i,y=p["".concat(s,".").concat(u)]||p[u]||c[u]||l;return a?n.createElement(y,r(r({ref:t},d),{},{components:a})):n.createElement(y,r({ref:t},d))}));function y(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var l=a.length,r=new Array(l);r[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:i,r[1]=o;for(var g=2;g<l;g++)r[g]=a[g];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9303:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>g});var n=a(8168),i=(a(6540),a(5680));const l={title:"Files",sidebar_position:6},r="Files",o={unversionedId:"Core/files",id:"Core/files",title:"Files",description:"What are Files in Open Register?",source:"@site/docs/Core/files.md",sourceDirName:"Core",slug:"/Core/files",permalink:"/docs/Core/files",draft:!1,editUrl:"https://github.com/conductionnl/openregister/tree/main/website/docs/Core/files.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Files",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Sources",permalink:"/docs/Core/sources"},next:{title:"Events",permalink:"/docs/Core/events"}},s={},g=[{value:"What are Files in Open Register?",id:"what-are-files-in-open-register",level:2},{value:"File Structure",id:"file-structure",level:2},{value:"Example File Metadata",id:"example-file-metadata",level:2},{value:"How Files are Stored",id:"how-files-are-stored",level:2},{value:"1. Nextcloud Storage",id:"1-nextcloud-storage",level:3},{value:"2. External Storage",id:"2-external-storage",level:3},{value:"3. Database Storage",id:"3-database-storage",level:3},{value:"File Features",id:"file-features",level:2},{value:"1. Versioning",id:"1-versioning",level:3},{value:"2. Access Control",id:"2-access-control",level:3},{value:"3. Metadata",id:"3-metadata",level:3},{value:"4. Preview Generation",id:"4-preview-generation",level:3},{value:"5. Content Extraction",id:"5-content-extraction",level:3},{value:"Working with Files",id:"working-with-files",level:2},{value:"Uploading Files",id:"uploading-files",level:3},{value:"Retrieving Files",id:"retrieving-files",level:3},{value:"Listing Files for an Object",id:"listing-files-for-an-object",level:3},{value:"Updating Files",id:"updating-files",level:3},{value:"Deleting Files",id:"deleting-files",level:3},{value:"File Relationships",id:"file-relationships",level:2},{value:"Files and Objects",id:"files-and-objects",level:3},{value:"Files and Schemas",id:"files-and-schemas",level:3},{value:"Files and Registers",id:"files-and-registers",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"1. Document Management",id:"1-document-management",level:3},{value:"2. Media Management",id:"2-media-management",level:3},{value:"3. Evidence Collection",id:"3-evidence-collection",level:3},{value:"4. Technical Documentation",id:"4-technical-documentation",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:g},p="wrapper";function c(e){let{components:t,...a}=e;return(0,i.yg)(p,(0,n.A)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"files"},"Files"),(0,i.yg)("h2",{id:"what-are-files-in-open-register"},"What are Files in Open Register?"),(0,i.yg)("p",null,"In Open Register, ",(0,i.yg)("strong",{parentName:"p"},"Files")," are binary data attachments that can be associated with objects. They extend the system beyond structured data to include documents, images, videos, and other file types that are essential for many applications."),(0,i.yg)("p",null,"Files in Open Register are:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Securely stored and managed"),(0,i.yg)("li",{parentName:"ul"},"Associated with specific objects"),(0,i.yg)("li",{parentName:"ul"},"Versioned alongside their parent objects"),(0,i.yg)("li",{parentName:"ul"},"Accessible through a consistent API"),(0,i.yg)("li",{parentName:"ul"},"Integrated with Nextcloud's file management capabilities")),(0,i.yg)("h2",{id:"file-structure"},"File Structure"),(0,i.yg)("p",null,"A file in Open Register consists of the following key components:"),(0,i.yg)("table",null,(0,i.yg)("thead",{parentName:"table"},(0,i.yg)("tr",{parentName:"thead"},(0,i.yg)("th",{parentName:"tr",align:null},"Property"),(0,i.yg)("th",{parentName:"tr",align:null},"Description"))),(0,i.yg)("tbody",{parentName:"table"},(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"id")),(0,i.yg)("td",{parentName:"tr",align:null},"Unique identifier for the file")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"name")),(0,i.yg)("td",{parentName:"tr",align:null},"Original filename")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"contentType")),(0,i.yg)("td",{parentName:"tr",align:null},"MIME type of the file")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"size")),(0,i.yg)("td",{parentName:"tr",align:null},"File size in bytes")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"url")),(0,i.yg)("td",{parentName:"tr",align:null},"URL to access the file")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"objectId")),(0,i.yg)("td",{parentName:"tr",align:null},"ID of the object this file is attached to")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"created")),(0,i.yg)("td",{parentName:"tr",align:null},"Timestamp of creation")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"updated")),(0,i.yg)("td",{parentName:"tr",align:null},"Timestamp of last update")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"version")),(0,i.yg)("td",{parentName:"tr",align:null},"Version identifier")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"metadata")),(0,i.yg)("td",{parentName:"tr",align:null},"Additional metadata about the file (optional)")))),(0,i.yg)("h2",{id:"example-file-metadata"},"Example File Metadata"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "file-12345",\n  "name": "contract.pdf",\n  "contentType": "application/pdf",\n  "size": 1245678,\n  "url": "/api/files/file-12345",\n  "objectId": "agreement-78901",\n  "created": "2023-03-15T09:45:00Z",\n  "updated": "2023-03-15T09:45:00Z",\n  "version": "1.0",\n  "metadata": {\n    "author": "Legal Department",\n    "securityLevel": "confidential",\n    "expiryDate": "2024-03-15"\n  }\n}\n')),(0,i.yg)("h2",{id:"how-files-are-stored"},"How Files are Stored"),(0,i.yg)("p",null,"Open Register provides flexible storage options for files:"),(0,i.yg)("h3",{id:"1-nextcloud-storage"},"1. Nextcloud Storage"),(0,i.yg)("p",null,"By default, files are stored in Nextcloud's file system, leveraging its robust file management capabilities, including:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Access control"),(0,i.yg)("li",{parentName:"ul"},"Versioning"),(0,i.yg)("li",{parentName:"ul"},"Encryption"),(0,i.yg)("li",{parentName:"ul"},"Collaborative editing")),(0,i.yg)("h3",{id:"2-external-storage"},"2. External Storage"),(0,i.yg)("p",null,"For larger deployments or specialized needs, files can be stored in:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Object storage systems (S3, MinIO)"),(0,i.yg)("li",{parentName:"ul"},"Content delivery networks"),(0,i.yg)("li",{parentName:"ul"},"Specialized document management systems")),(0,i.yg)("h3",{id:"3-database-storage"},"3. Database Storage"),(0,i.yg)("p",null,"Small files can be stored directly in the database for simplicity and performance."),(0,i.yg)("h2",{id:"file-features"},"File Features"),(0,i.yg)("h3",{id:"1-versioning"},"1. Versioning"),(0,i.yg)("p",null,"Files maintain version history, allowing you to:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Track changes over time"),(0,i.yg)("li",{parentName:"ul"},"Revert to previous versions"),(0,i.yg)("li",{parentName:"ul"},"Compare different versions")),(0,i.yg)("h3",{id:"2-access-control"},"2. Access Control"),(0,i.yg)("p",null,"Files inherit access control from their parent objects, ensuring consistent security:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Users who can access an object can access its files"),(0,i.yg)("li",{parentName:"ul"},"Additional file-specific permissions can be applied"),(0,i.yg)("li",{parentName:"ul"},"Permissions can be audited")),(0,i.yg)("h3",{id:"3-metadata"},"3. Metadata"),(0,i.yg)("p",null,"Files support rich metadata to provide context and improve searchability:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Standard metadata (creation date, size, type)"),(0,i.yg)("li",{parentName:"ul"},"Custom metadata specific to your application"),(0,i.yg)("li",{parentName:"ul"},"Extracted metadata (e.g., EXIF data from images)")),(0,i.yg)("h3",{id:"4-preview-generation"},"4. Preview Generation"),(0,i.yg)("p",null,"Open Register can generate previews for common file types:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Thumbnails for images"),(0,i.yg)("li",{parentName:"ul"},"PDF previews"),(0,i.yg)("li",{parentName:"ul"},"Document previews")),(0,i.yg)("h3",{id:"5-content-extraction"},"5. Content Extraction"),(0,i.yg)("p",null,"For supported file types, content can be extracted for indexing and search:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Text extraction from documents"),(0,i.yg)("li",{parentName:"ul"},"OCR for scanned documents"),(0,i.yg)("li",{parentName:"ul"},"Metadata extraction")),(0,i.yg)("h2",{id:"working-with-files"},"Working with Files"),(0,i.yg)("h3",{id:"uploading-files"},"Uploading Files"),(0,i.yg)("p",null,"Files can be uploaded and attached to objects:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},'POST /api/objects/{id}/files\nContent-Type: multipart/form-data\n\nfile: [binary data]\nmetadata: {"author": "Legal Department", "securityLevel": "confidential"}\n')),(0,i.yg)("h3",{id:"retrieving-files"},"Retrieving Files"),(0,i.yg)("p",null,"You can download a file:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET /api/files/{id}\n")),(0,i.yg)("p",null,"Or get file metadata:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET /api/files/{id}/metadata\n")),(0,i.yg)("h3",{id:"listing-files-for-an-object"},"Listing Files for an Object"),(0,i.yg)("p",null,"You can retrieve all files associated with an object:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET /api/objects/files/{objectId}\n")),(0,i.yg)("h3",{id:"updating-files"},"Updating Files"),(0,i.yg)("p",null,"Files can be updated by uploading a new version:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"PUT /api/files/{id}\nContent-Type: multipart/form-data\n\nfile: [binary data]\n")),(0,i.yg)("h3",{id:"deleting-files"},"Deleting Files"),(0,i.yg)("p",null,"Files can be deleted when no longer needed:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"DELETE /api/files/{id}\n")),(0,i.yg)("h2",{id:"file-relationships"},"File Relationships"),(0,i.yg)("p",null,"Files have important relationships with other core concepts:"),(0,i.yg)("h3",{id:"files-and-objects"},"Files and Objects"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Files are attached to objects"),(0,i.yg)("li",{parentName:"ul"},"An object can have multiple files"),(0,i.yg)("li",{parentName:"ul"},"Files inherit permissions from their parent object"),(0,i.yg)("li",{parentName:"ul"},"Files are versioned alongside their parent object")),(0,i.yg)("h3",{id:"files-and-schemas"},"Files and Schemas"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Schemas can define expectations for file attachments"),(0,i.yg)("li",{parentName:"ul"},"File validation can be specified in schemas (allowed types, max size)"),(0,i.yg)("li",{parentName:"ul"},"Schemas can define required file attachments")),(0,i.yg)("h3",{id:"files-and-registers"},"Files and Registers"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Registers can be configured with different file storage options"),(0,i.yg)("li",{parentName:"ul"},"File storage policies can be defined at the register level"),(0,i.yg)("li",{parentName:"ul"},"Registers can have quotas for file storage")),(0,i.yg)("h2",{id:"use-cases"},"Use Cases"),(0,i.yg)("h3",{id:"1-document-management"},"1. Document Management"),(0,i.yg)("p",null,"Attach important documents to business objects:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Contracts to customer records"),(0,i.yg)("li",{parentName:"ul"},"Invoices to order records"),(0,i.yg)("li",{parentName:"ul"},"Specifications to product records")),(0,i.yg)("h3",{id:"2-media-management"},"2. Media Management"),(0,i.yg)("p",null,"Store and manage media assets:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Product images"),(0,i.yg)("li",{parentName:"ul"},"Marketing materials"),(0,i.yg)("li",{parentName:"ul"},"Training videos")),(0,i.yg)("h3",{id:"3-evidence-collection"},"3. Evidence Collection"),(0,i.yg)("p",null,"Maintain evidence for regulatory or legal purposes:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Compliance documentation"),(0,i.yg)("li",{parentName:"ul"},"Audit evidence"),(0,i.yg)("li",{parentName:"ul"},"Legal case files")),(0,i.yg)("h3",{id:"4-technical-documentation"},"4. Technical Documentation"),(0,i.yg)("p",null,"Manage technical documents:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"User manuals"),(0,i.yg)("li",{parentName:"ul"},"Technical specifications"),(0,i.yg)("li",{parentName:"ul"},"Installation guides")),(0,i.yg)("h2",{id:"best-practices"},"Best Practices"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Define File Types"),": Establish clear guidelines for what file types are allowed"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Set Size Limits"),": Define appropriate size limits for different file types"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Use Metadata"),": Add relevant metadata to improve searchability and context"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Consider Storage"),": Choose appropriate storage backends based on file types and access patterns"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Implement Retention Policies"),": Define how long files should be kept"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Plan for Backup"),": Ensure files are included in backup strategies"),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Consider Performance"),": Optimize file storage for your access patterns")),(0,i.yg)("h2",{id:"conclusion"},"Conclusion"),(0,i.yg)("p",null,"Files in Open Register bridge the gap between structured data and unstructured content, providing a comprehensive solution for managing all types of information in your application. By integrating files with objects, schemas, and registers, Open Register creates a unified system where all your data\u2014structured and unstructured\u2014works together seamlessly."))}c.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkopen_catalogi_docs=self.webpackChunkopen_catalogi_docs||[]).push([[3026],{4334:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Features/audit-trails","title":"Audit Trails","description":"Audit trails provide a complete history of all changes made to objects in Open Register. This feature ensures transparency and accountability by tracking who made what changes and when. The implementation follows the GEMMA Processing Logging standard.","source":"@site/docs/Features/audit-trails.md","sourceDirName":"Features","slug":"/Features/audit-trails","permalink":"/docs/Features/audit-trails","draft":false,"unlisted":false,"editUrl":"https://github.com/conductionnl/openregister/tree/main/website/docs/Features/audit-trails.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Advanced Search","permalink":"/docs/Features/advanced-search"},"next":{"title":"Automatic Facets","permalink":"/docs/Features/automatic-facets"}}');var r=i(4848),t=i(8453);const d={},l="Audit Trails",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Read Action Logging",id:"read-action-logging",level:2},{value:"Logged Information",id:"logged-information",level:2},{value:"Additional Required Fields",id:"additional-required-fields",level:3},{value:"Processing Logging Structure",id:"processing-logging-structure",level:2},{value:"Key Benefits",id:"key-benefits",level:2},{value:"Integration",id:"integration",level:2},{value:"Access",id:"access",level:2},{value:"Related Features",id:"related-features",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"audit-trails",children:"Audit Trails"})}),"\n",(0,r.jsxs)(n.p,{children:["Audit trails provide a complete history of all changes made to objects in Open Register. This feature ensures transparency and accountability by tracking who made what changes and when. The implementation follows the ",(0,r.jsx)(n.a,{href:"https://vng-realisatie.github.io/gemma-verwerkingenlogging/gegevensmodel/basisterminologie.html",children:"GEMMA Processing Logging standard"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The audit trail system automatically records:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All modifications to objects"}),"\n",(0,r.jsx)(n.li,{children:"Individual object reads (but not collection reads)"}),"\n",(0,r.jsx)(n.li,{children:"Who made the changes"}),"\n",(0,r.jsx)(n.li,{children:"When changes occurred"}),"\n",(0,r.jsx)(n.li,{children:"What specific data was changed"}),"\n",(0,r.jsx)(n.li,{children:"The reason for changes (when provided)"}),"\n",(0,r.jsx)(n.li,{children:"Processing activities"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"read-action-logging",children:"Read Action Logging"}),"\n",(0,r.jsx)(n.p,{children:"The system only logs read actions when accessing individual objects (e.g., GET /api/objects/123). Collection reads and search operations (e.g., GET /api/objects?name=test) are intentionally not logged for several important reasons:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance Impact"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Collection reads can return hundreds or thousands of objects"}),"\n",(0,r.jsx)(n.li,{children:"Logging each object view would create massive amounts of audit data"}),"\n",(0,r.jsx)(n.li,{children:"Database performance would degrade significantly"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Storage Concerns"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The audit log would grow exponentially"}),"\n",(0,r.jsx)(n.li,{children:"Storage costs would increase dramatically"}),"\n",(0,r.jsx)(n.li,{children:"Valuable audit data would be diluted with less meaningful entries"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Meaningful Tracking"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Individual object reads indicate specific interest in that object"}),"\n",(0,r.jsx)(n.li,{children:"Collection reads are often exploratory or part of routine operations"}),"\n",(0,r.jsx)(n.li,{children:"Focus on logging deliberate access to specific objects"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"logged-information",children:"Logged Information"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Example"}),(0,r.jsx)(n.th,{children:"How Determined"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"uuid"}),(0,r.jsx)(n.td,{children:"Unique identifier for the audit entry"}),(0,r.jsx)(n.td,{children:"550e8400-e29b-41d4-a716-446655440000"}),(0,r.jsx)(n.td,{children:"Generated using UUID v4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"schema"}),(0,r.jsx)(n.td,{children:"Schema ID of the modified object"}),(0,r.jsx)(n.td,{children:"42"}),(0,r.jsx)(n.td,{children:"From object's schema reference"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"register"}),(0,r.jsx)(n.td,{children:"Register ID of the modified object"}),(0,r.jsx)(n.td,{children:"123"}),(0,r.jsx)(n.td,{children:"From object's register reference"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{children:"Object ID that was modified"}),(0,r.jsx)(n.td,{children:"456"}),(0,r.jsx)(n.td,{children:"From modified object's ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"action"}),(0,r.jsx)(n.td,{children:"Type of change that occurred"}),(0,r.jsx)(n.td,{children:"create, read, update, delete"}),(0,r.jsx)(n.td,{children:"Determined by system operation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"changed"}),(0,r.jsx)(n.td,{children:"Array of modified fields with old/new values"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'{"name": {"old": "John", "new": "Jane"}}'})}),(0,r.jsx)(n.td,{children:"Diff between object states"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"user"}),(0,r.jsx)(n.td,{children:"ID of the user who made the change"}),(0,r.jsx)(n.td,{children:"admin"}),(0,r.jsx)(n.td,{children:"From authenticated user session"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"userName"}),(0,r.jsx)(n.td,{children:"Display name of the user"}),(0,r.jsx)(n.td,{children:"Administrator"}),(0,r.jsx)(n.td,{children:"From user profile"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"session"}),(0,r.jsx)(n.td,{children:"Session ID when change occurred"}),(0,r.jsx)(n.td,{children:"sess_89d7h2"}),(0,r.jsx)(n.td,{children:"From current session"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"request"}),(0,r.jsx)(n.td,{children:"Request ID for tracing"}),(0,r.jsx)(n.td,{children:"req_7d8h3j"}),(0,r.jsx)(n.td,{children:"Generated per request"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ipAddress"}),(0,r.jsx)(n.td,{children:"IP address of the request"}),(0,r.jsx)(n.td,{children:"192.168.1.1"}),(0,r.jsx)(n.td,{children:"From request headers"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"version"}),(0,r.jsx)(n.td,{children:"Object version after change"}),(0,r.jsx)(n.td,{children:"1.0.0"}),(0,r.jsx)(n.td,{children:"Incremented on each change"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"created"}),(0,r.jsx)(n.td,{children:"Timestamp of the change"}),(0,r.jsx)(n.td,{children:"2024-03-15T14:30:00Z"}),(0,r.jsx)(n.td,{children:"Server timestamp"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"additional-required-fields",children:"Additional Required Fields"}),"\n",(0,r.jsx)(n.p,{children:"To enhance audit logging, we should add:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"How Determined"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"processingActivity"}),(0,r.jsx)(n.td,{children:"The processing activity from the registry"}),(0,r.jsx)(n.td,{children:"From process registry lookup"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"processing"}),(0,r.jsx)(n.td,{children:"The specific task being performed"}),(0,r.jsx)(n.td,{children:"From application context"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"operation"}),(0,r.jsx)(n.td,{children:"The step in the processing task"}),(0,r.jsx)(n.td,{children:"From system operation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"legalBasis"}),(0,r.jsx)(n.td,{children:"Legal basis for the processing"}),(0,r.jsx)(n.td,{children:"From process configuration"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"retentionPeriod"}),(0,r.jsx)(n.td,{children:"Retention period for the data"}),(0,r.jsx)(n.td,{children:"From schema configuration"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"executor"}),(0,r.jsx)(n.td,{children:"The system or person executing the action"}),(0,r.jsx)(n.td,{children:"From authenticated context"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"system"}),(0,r.jsx)(n.td,{children:"The system where the action occurred"}),(0,r.jsx)(n.td,{children:"From application config"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"dataSource"}),(0,r.jsx)(n.td,{children:"The source of the data"}),(0,r.jsx)(n.td,{children:"From data origin tracking"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"processing-logging-structure",children:"Processing Logging Structure"}),"\n",(0,r.jsx)(n.p,{children:"The audit trail system follows this hierarchical structure:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Processing Activity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"High-level category of data processing"}),"\n",(0,r.jsx)(n.li,{children:"Determined by: Process registry lookup"}),"\n",(0,r.jsx)(n.li,{children:'Example: "Citizen Registration"'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Processing"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Specific task being executed"}),"\n",(0,r.jsx)(n.li,{children:"Determined by: Application context"}),"\n",(0,r.jsx)(n.li,{children:'Example: "Address Change Request"'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Operation"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Individual step in processing"}),"\n",(0,r.jsx)(n.li,{children:"Determined by: System operation"}),"\n",(0,r.jsx)(n.li,{children:'Example: "Validate Address"'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Action"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Actual system operation"}),"\n",(0,r.jsx)(n.li,{children:"Determined by: Database operation"}),"\n",(0,r.jsx)(n.li,{children:'Example: "Update Address Field"'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-benefits",children:"Key Benefits"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Compliance & Accountability"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Meet regulatory requirements"}),"\n",(0,r.jsx)(n.li,{children:"Track responsibility for changes"}),"\n",(0,r.jsx)(n.li,{children:"Maintain data integrity records"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Change Management"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Review modification history"}),"\n",(0,r.jsx)(n.li,{children:"Understand data evolution"}),"\n",(0,r.jsx)(n.li,{children:"Investigate data issues"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Detect unauthorized changes"}),"\n",(0,r.jsx)(n.li,{children:"Monitor sensitive data access"}),"\n",(0,r.jsx)(n.li,{children:"Support security audits"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,r.jsx)(n.p,{children:"Audit trails are automatically enabled for all objects in Open Register. No additional configuration is required to start tracking changes."}),"\n",(0,r.jsx)(n.h2,{id:"access",children:"Access"}),"\n",(0,r.jsx)(n.p,{children:"Audit trails can be accessed:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Through the object detail view"}),"\n",(0,r.jsx)(n.li,{children:"Via the API"}),"\n",(0,r.jsx)(n.li,{children:"Through database queries (for system administrators)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-features",children:"Related Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/Features/time-travel",children:"Time Travel"})," - Use audit trails to restore previous states"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/Features/object-locking",children:"Object Locking"})," - Prevent unauthorized changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/Features/access-control",children:"Access Control"})," - Manage who can view audit trails"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);
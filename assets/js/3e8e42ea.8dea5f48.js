"use strict";(self.webpackChunkopen_register_docs=self.webpackChunkopen_register_docs||[]).push([[586],{3064:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=t(8168),i=(t(6540),t(5680));const l={},r="Data Extension (_extend)",o={unversionedId:"data-extension",id:"data-extension",title:"Data Extension (_extend)",description:"Data Extension allows you to automatically include related entities in API responses, reducing the need for multiple API calls and providing complete context in a single request. This is useful when you need to retrieve related data for a specific object or collection an lowers the number of API calls needed therby reducing the load on the server and improving performence client side.",source:"@site/docs/data-extension.md",sourceDirName:".",slug:"/data-extension",permalink:"/docs/data-extension",draft:!1,editUrl:"https://github.com/conductionnl/openregister/tree/main/website/docs/data-extension.md",tags:[],version:"current",frontMatter:{}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Extension Patterns",id:"extension-patterns",level:2},{value:"Basic Extension",id:"basic-extension",level:3},{value:"Nested Extension",id:"nested-extension",level:3},{value:"Multiple Extensions",id:"multiple-extensions",level:3},{value:"Extension Logic",id:"extension-logic",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Related Features",id:"related-features",level:2},{value:"Extension Types",id:"extension-types",level:2},{value:"Direct Relations",id:"direct-relations",level:3},{value:"Nested Relations",id:"nested-relations",level:3},{value:"Reference Types",id:"reference-types",level:3},{value:"Key Benefits",id:"key-benefits",level:2},{value:"Integration with Privacy",id:"integration-with-privacy",level:2},{value:"Using the objects api",id:"using-the-objects-api",level:2},{value:"Single Object Extension",id:"single-object-extension",level:3},{value:"Collection Extension",id:"collection-extension",level:3},{value:"Extending Multiple Properties",id:"extending-multiple-properties",level:3},{value:"Extending Nested Properties",id:"extending-nested-properties",level:3},{value:"Using the object service",id:"using-the-object-service",level:3}],g={toc:p},d="wrapper";function u(e){let{components:n,...t}=e;return(0,i.yg)(d,(0,a.A)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"data-extension-_extend"},"Data Extension (_extend)"),(0,i.yg)("p",null,"Data Extension allows you to automatically include related entities in API responses, reducing the need for multiple API calls and providing complete context in a single request. This is useful when you need to retrieve related data for a specific object or collection an lowers the number of API calls needed therby reducing the load on the server and improving performence client side."),(0,i.yg)("p",null,"The extend patern is based was orginally developed for the ",(0,i.yg)("a",{parentName:"p",href:"https://opencatalogi.org"},"Open Catalogi")," project and is now available in the ObjectStore API. Its baed on the extend functionality of ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/VNG-Realisatie/gemma-zaken"},"Zaak gericht werken")," but brought in line with p",(0,i.yg)("a",{parentName:"p",href:"https://logius-standaarden.github.io/API-Design-Rules/"},"NLGov REST API Design Rules")," by adding a _ prefix to the parameter"),(0,i.yg)("h2",{id:"overview"},"Overview"),(0,i.yg)("p",null,"The extension system provides:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Automatic inclusion of related objects"),(0,i.yg)("li",{parentName:"ul"},"Nested object resolution"),(0,i.yg)("li",{parentName:"ul"},"Circular reference protection"),(0,i.yg)("li",{parentName:"ul"},"Depth limiting"),(0,i.yg)("li",{parentName:"ul"},"Performance optimization")),(0,i.yg)("h2",{id:"extension-patterns"},"Extension Patterns"),(0,i.yg)("h3",{id:"basic-extension"},"Basic Extension"),(0,i.yg)("p",null,"Extend a single property:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=author")," - Include full author object"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=category")," - Include full category object"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=files")," - Include file metadata")),(0,i.yg)("h3",{id:"nested-extension"},"Nested Extension"),(0,i.yg)("p",null,"Extend nested properties:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=author.organization")," - Include author with their organization"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=department.employees")," - Include department with all employees"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=project.tasks.assignee")," - Include project with tasks and their assignees")),(0,i.yg)("h3",{id:"multiple-extensions"},"Multiple Extensions"),(0,i.yg)("p",null,"Combine multiple extensions:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=author,category,comments")," - Include multiple related objects"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=files,metadata,relations")," - Include all related data"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"?_extend=all")," - Include all possible relations on the root object")),(0,i.yg)("h2",{id:"extension-logic"},"Extension Logic"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Depth Control")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Maximum depth of 3 levels"),(0,i.yg)("li",{parentName:"ul"},"Prevents infinite recursion"),(0,i.yg)("li",{parentName:"ul"},"Optimizes response size"),(0,i.yg)("li",{parentName:"ul"},"Manages performance"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Circular Detection")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Identifies circular references"),(0,i.yg)("li",{parentName:"ul"},"Prevents infinite loops"),(0,i.yg)("li",{parentName:"ul"},"Maintains data integrity"),(0,i.yg)("li",{parentName:"ul"},"Optimizes response"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Type Handling")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Single object relations"),(0,i.yg)("li",{parentName:"ul"},"Array of objects"),(0,i.yg)("li",{parentName:"ul"},"File references"),(0,i.yg)("li",{parentName:"ul"},"External references")))),(0,i.yg)("h2",{id:"performance-considerations"},"Performance Considerations"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Query Optimization")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Efficient database queries"),(0,i.yg)("li",{parentName:"ul"},"Batch loading"),(0,i.yg)("li",{parentName:"ul"},"Cache utilization"),(0,i.yg)("li",{parentName:"ul"},"Resource management"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Response Size")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Selective extension"),(0,i.yg)("li",{parentName:"ul"},"Depth limiting"),(0,i.yg)("li",{parentName:"ul"},"Data filtering"),(0,i.yg)("li",{parentName:"ul"},"Compression"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Caching")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Response caching"),(0,i.yg)("li",{parentName:"ul"},"Relation caching"),(0,i.yg)("li",{parentName:"ul"},"Cache invalidation"),(0,i.yg)("li",{parentName:"ul"},"Cache optimization")))),(0,i.yg)("h2",{id:"best-practices"},"Best Practices"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Extension Selection")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Request only needed relations"),(0,i.yg)("li",{parentName:"ul"},"Consider response size"),(0,i.yg)("li",{parentName:"ul"},"Use appropriate depth"),(0,i.yg)("li",{parentName:"ul"},"Plan for performance"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Query Design")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Use specific extensions"),(0,i.yg)("li",{parentName:"ul"},"Combine related requests"),(0,i.yg)("li",{parentName:"ul"},"Optimize query patterns"),(0,i.yg)("li",{parentName:"ul"},"Consider caching"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Error Handling")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Handle missing relations"),(0,i.yg)("li",{parentName:"ul"},"Validate extension paths"),(0,i.yg)("li",{parentName:"ul"},"Manage timeouts"),(0,i.yg)("li",{parentName:"ul"},"Provide fallbacks")))),(0,i.yg)("h2",{id:"related-features"},"Related Features"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"/docs/object-relations"},"Object Relations")," - Base for extensions"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("a",{parentName:"li",href:"/docs/content-search"},"Content Search")," - Search within extended data")),(0,i.yg)("h2",{id:"extension-types"},"Extension Types"),(0,i.yg)("h3",{id:"direct-relations"},"Direct Relations"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Single object relations"),(0,i.yg)("li",{parentName:"ul"},"Collection relations"),(0,i.yg)("li",{parentName:"ul"},"External references"),(0,i.yg)("li",{parentName:"ul"},"URI resolutions")),(0,i.yg)("h3",{id:"nested-relations"},"Nested Relations"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Multi-level extensions"),(0,i.yg)("li",{parentName:"ul"},"Depth control"),(0,i.yg)("li",{parentName:"ul"},"Circular detection"),(0,i.yg)("li",{parentName:"ul"},"Performance optimization")),(0,i.yg)("h3",{id:"reference-types"},"Reference Types"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Internal IDs"),(0,i.yg)("li",{parentName:"ul"},"External URLs"),(0,i.yg)("li",{parentName:"ul"},"URNs"),(0,i.yg)("li",{parentName:"ul"},"Custom identifiers")),(0,i.yg)("h2",{id:"key-benefits"},"Key Benefits"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Performance")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Reduce API calls"),(0,i.yg)("li",{parentName:"ul"},"Optimize data retrieval"),(0,i.yg)("li",{parentName:"ul"},"Efficient response handling"),(0,i.yg)("li",{parentName:"ul"},"Bandwidth optimization"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Data Completeness")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Get full context"),(0,i.yg)("li",{parentName:"ul"},"Include related data"),(0,i.yg)("li",{parentName:"ul"},"Resolve references"),(0,i.yg)("li",{parentName:"ul"},"Complete object graphs"))),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Flexibility")),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Client-driven inclusion"),(0,i.yg)("li",{parentName:"ul"},"Dynamic data loading"),(0,i.yg)("li",{parentName:"ul"},"Customizable depth"),(0,i.yg)("li",{parentName:"ul"},"Selective extension")))),(0,i.yg)("h2",{id:"integration-with-privacy"},"Integration with Privacy"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Respects access controls on related objects"),(0,i.yg)("li",{parentName:"ul"},"Honors data minimalization principles"),(0,i.yg)("li",{parentName:"ul"},"Supports GDPR compliance"),(0,i.yg)("li",{parentName:"ul"},"Provides audit trail integration")),(0,i.yg)("h2",{id:"using-the-objects-api"},"Using the objects api"),(0,i.yg)("h3",{id:"single-object-extension"},"Single Object Extension"),(0,i.yg)("p",null,"Consider a Dog object with a reference to its Breed:"),(0,i.yg)("p",null,"Request:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET /api/dogs/123\n")),(0,i.yg)("p",null,"Response:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "id": "550e8400-e29b-41d4-a716-446655440000",\n    "name": "Max",\n    "breed": "https://api.petstore.com/breeds/german-shepherd",\n    "age": 5\n}\n')),(0,i.yg)("p",null,"With data extension enabled:"),(0,i.yg)("p",null,"Request:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET /api/dogs/123?extend=breed\n")),(0,i.yg)("p",null,"Response:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "id": "550e8400-e29b-41d4-a716-446655440000",\n    "name": "Max",\n    "breed": {\n        "id": "german-shepherd",\n        "name": "German Shepherd",\n        "origin": "Germany",\n        "size": "Large"\n    },\n    "age": 5\n}\n')),(0,i.yg)("h3",{id:"collection-extension"},"Collection Extension"),(0,i.yg)("p",null,"The same principle works when retrieving collections:"),(0,i.yg)("p",null,"Request:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre"},"GET /api/dogs?extend=breed\n")),(0,i.yg)("p",null,"Response:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "results": [\n        {\n            "id": "550e8400-e29b-41d4-a716-446655440000",\n            "name": "Max",\n            "breed": {\n                "id": "german-shepherd",\n                "name": "German Shepherd",\n                "origin": "Germany",\n                "size": "Large"\n            },\n            "age": 5\n        },\n        {\n            "id": "550e8400-e29b-41d4-a716-446655440001",\n            "name": "Bella",\n            "breed": {\n                "id": "golden-retriever",\n                "name": "Golden Retriever",\n                "origin": "Scotland",\n                "size": "Large"\n            },\n            "age": 3\n        }\n    ],\n    "total": 2\n}\n')),(0,i.yg)("h3",{id:"extending-multiple-properties"},"Extending Multiple Properties"),(0,i.yg)("p",null,"You can extend multiple properties in two ways:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"Using a comma-separated list:")),(0,i.yg)("p",null,"Request:\n",(0,i.yg)("inlineCode",{parentName:"p"},"GET /api/dogs?extend=breed,owner")),(0,i.yg)("ol",{start:2},(0,i.yg)("li",{parentName:"ol"},"Using an array format:")),(0,i.yg)("p",null,"Request:\n",(0,i.yg)("inlineCode",{parentName:"p"},"GET /api/dogs?extend[]=breed&extend[]=owner")),(0,i.yg)("p",null,"Both approaches will produce the same result, extending multiple properties in a single request."),(0,i.yg)("h3",{id:"extending-nested-properties"},"Extending Nested Properties"),(0,i.yg)("p",null,"You can extend properties of already extended objects using dot notation. This allows you to access nested data structures."),(0,i.yg)("p",null,"For example, to extend the breed's parent breed information:"),(0,i.yg)("p",null,"Request:\n",(0,i.yg)("inlineCode",{parentName:"p"},"GET /api/dogs?extend=breed.parent_breed")),(0,i.yg)("p",null,"Response:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "results": [\n        {\n            "id": "550e8400-e29b-41d4-a716-446655440000",\n            "name": "Max",\n            "breed": {\n                "id": "german-shepherd",\n                "name": "German Shepherd",\n                "origin": "Germany",\n                "size": "Large",\n                "parent_breed": {\n                    "id": "herding-dog",\n                    "name": "Herding Dog",\n                    "category": "Working Dog"\n                }\n            },\n            "age": 5\n        }\n    ]\n}\n')),(0,i.yg)("p",null,"You can combine nested property extension with multiple property extension:"),(0,i.yg)("p",null,"Using comma separation:\n",(0,i.yg)("inlineCode",{parentName:"p"},"GET /api/dogs?extend=breed.parent_breed,owner.address")),(0,i.yg)("p",null,"Using array notation:\n",(0,i.yg)("inlineCode",{parentName:"p"},"GET /api/dogs?extend[]=breed.parent_breed&extend[]=owner.address")),(0,i.yg)("p",null,"Or combining both approaches:\n",(0,i.yg)("inlineCode",{parentName:"p"},"GET /api/dogs?extend[]=breed.parent_breed,owner.contact&extend=owner.address")),(0,i.yg)("p",null,"This gives you powerful flexibility to fetch exactly the nested data you need in a single request."),(0,i.yg)("h3",{id:"using-the-object-service"},"Using the object service"),(0,i.yg)("p",null,"The ObjectService provides a PHP interface to use data extension programmatically:"),(0,i.yg)("p",null,"// Extend a single property"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-php"},"$dogs = $objectService->find('dogs', ['extend' => 'breed']);\n")),(0,i.yg)("p",null,"// Extend multiple properties using array"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-php"},"$dogs = $objectService->find('dogs', [\n    'extend' => ['breed', 'owner']\n]);\n")),(0,i.yg)("p",null,"// Extend nested properties"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-php"},"$dogs = $objectService->find('dogs', [\n    'extend' => ['breed.parent_breed', 'owner.address']\n]);\n")),(0,i.yg)("p",null,"// Combine with other query parameters"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-php"},"$dogs = $objectService->find('dogs', [\n    'extend' => ['breed', 'owner'],\n    'filter' => ['age' => 5],\n    'limit' => 10\n]);\n\n\n## Related Features\n\n- [Object Relations](object-relations.md) - Base functionality for relations\n- [Data Filtering](data-filtering.md) - Combine with filtering for precise data selection\n- [Access Control](access-control.md) - Security for extended data\n")))}u.isMDXComponent=!0},5680:(e,n,t)=>{t.d(n,{xA:()=>g,yg:()=>c});var a=t(6540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},g=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},y=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,l=e.originalType,s=e.parentName,g=o(e,["components","mdxType","originalType","parentName"]),d=p(t),y=i,c=d["".concat(s,".").concat(y)]||d[y]||u[y]||l;return t?a.createElement(c,r(r({ref:n},g),{},{components:t})):a.createElement(c,r({ref:n},g))}));function c(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var l=t.length,r=new Array(l);r[0]=y;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[d]="string"==typeof e?e:i,r[1]=o;for(var p=2;p<l;p++)r[p]=t[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}y.displayName="MDXCreateElement"}}]);
"use strict";(self.webpackChunkopen_register_docs=self.webpackChunkopen_register_docs||[]).push([[215],{2248:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(8168),r=(n(6540),n(5680));const i={title:"Schemas",sidebar_position:3},s="Schemas",l={unversionedId:"Core/schemas",id:"Core/schemas",title:"Schemas",description:"What is a Schema?",source:"@site/docs/Core/schemas.md",sourceDirName:"Core",slug:"/Core/schemas",permalink:"/docs/Core/schemas",draft:!1,editUrl:"https://github.com/conductionnl/openregister/tree/main/website/docs/Core/schemas.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Schemas",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Registers",permalink:"/docs/Core/registers"},next:{title:"Objects",permalink:"/docs/Core/objects"}},o={},p=[{value:"What is a Schema?",id:"what-is-a-schema",level:2},{value:"Schema Structure",id:"schema-structure",level:2},{value:"Property Structure",id:"property-structure",level:2},{value:"Example Schema",id:"example-schema",level:2},{value:"Schema Use Cases",id:"schema-use-cases",level:2},{value:"1. Data Validation",id:"1-data-validation",level:3},{value:"2. Documentation",id:"2-documentation",level:3},{value:"3. API Contract",id:"3-api-contract",level:3},{value:"4. UI Generation",id:"4-ui-generation",level:3},{value:"Working with Schemas",id:"working-with-schemas",level:2},{value:"Creating a Schema",id:"creating-a-schema",level:3},{value:"Retrieving Schema Information",id:"retrieving-schema-information",level:3},{value:"Updating a Schema",id:"updating-a-schema",level:3},{value:"Nesting schema&#39;s",id:"nesting-schemas",level:3},{value:"Schema Versioning",id:"schema-versioning",level:3},{value:"Schema Design Best Practices",id:"schema-design-best-practices",level:2},{value:"Relationship to Other Concepts",id:"relationship-to-other-concepts",level:2},{value:"Conclusion",id:"conclusion",level:2}],m={toc:p},d="wrapper";function g(e){let{components:t,...n}=e;return(0,r.yg)(d,(0,a.A)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"schemas"},"Schemas"),(0,r.yg)("h2",{id:"what-is-a-schema"},"What is a Schema?"),(0,r.yg)("p",null,"In Open Register, a ",(0,r.yg)("strong",{parentName:"p"},"Schema")," defines the structure, validation rules, and relationships for data objects. Schemas act as blueprints that specify:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"What ",(0,r.yg)("strong",{parentName:"li"},"fields")," an object should have"),(0,r.yg)("li",{parentName:"ul"},"What ",(0,r.yg)("strong",{parentName:"li"},"data types")," those fields should be"),(0,r.yg)("li",{parentName:"ul"},"Which fields are ",(0,r.yg)("strong",{parentName:"li"},"required")," vs. optional"),(0,r.yg)("li",{parentName:"ul"},"Any ",(0,r.yg)("strong",{parentName:"li"},"constraints")," on field values (min/max, patterns, enums)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Relationships")," between different objects")),(0,r.yg)("p",null,"Open Register uses ",(0,r.yg)("a",{parentName:"p",href:"https://json-schema.org/"},"JSON Schema")," as its schema definition language, providing a powerful and standardized way to describe data structures."),(0,r.yg)("h2",{id:"schema-structure"},"Schema Structure"),(0,r.yg)("p",null,"A schema in Open Register follows the JSON Schema specification (see ",(0,r.yg)("a",{parentName:"p",href:"https://json-schema.org/understanding-json-schema"},"JSON Schema Core")," and ",(0,r.yg)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/json-schema-validation.html"},"JSON Schema Validation"),") and consists of the following key components defined in the specification:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Property"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"id")),(0,r.yg)("td",{parentName:"tr",align:null},"Unique identifier for the schema")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"title")),(0,r.yg)("td",{parentName:"tr",align:null},"Human-readable name of the schema")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"version")),(0,r.yg)("td",{parentName:"tr",align:null},"Schema version in semantic versioning format")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"description")),(0,r.yg)("td",{parentName:"tr",align:null},"Detailed explanation of what the schema represents")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"summary")),(0,r.yg)("td",{parentName:"tr",align:null},"Brief summary of the schema's purpose")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"required")),(0,r.yg)("td",{parentName:"tr",align:null},"Array of property names that are required")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"properties")),(0,r.yg)("td",{parentName:"tr",align:null},"Object defining the properties and their types")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"archive")),(0,r.yg)("td",{parentName:"tr",align:null},"Archive of previous schema versions")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"updated")),(0,r.yg)("td",{parentName:"tr",align:null},"Timestamp of last update")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"created")),(0,r.yg)("td",{parentName:"tr",align:null},"Timestamp of creation")))),(0,r.yg)("h2",{id:"property-structure"},"Property Structure"),(0,r.yg)("p",null,"Before diving into schema examples, let's understand the key components of a property definition. These components are primarily derived from JSON Schema specifications (see ",(0,r.yg)("a",{parentName:"p",href:"https://json-schema.org/draft/2020-12/json-schema-validation.html"},"JSON Schema Validation"),") with some additional extensions required for storage and validation purposes:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Property"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"),(0,r.yg)("th",{parentName:"tr",align:null},"Example"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://json-schema.org/understanding-json-schema/reference/type#type-specific-keywords"},(0,r.yg)("inlineCode",{parentName:"a"},"type"))),(0,r.yg)("td",{parentName:"tr",align:null},"Data type of the property (string, number, boolean, object, array)"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"type": "string"'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://json-schema.org/understanding-json-schema/keywords#description"},(0,r.yg)("inlineCode",{parentName:"a"},"description"))),(0,r.yg)("td",{parentName:"tr",align:null},"Human-readable explanation of the property's purpose"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"description": "Person\'s full name"'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"https://json-schema.org/understanding-json-schema/reference/type#format"},(0,r.yg)("inlineCode",{parentName:"a"},"format"))),(0,r.yg)("td",{parentName:"tr",align:null},"Specific for the type (date, email, uri, etc)"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"format": "date-time"'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pattern")),(0,r.yg)("td",{parentName:"tr",align:null},"Regular expression pattern the value must match"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"pattern": "^[A-Z][a-z]+$"'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"enum")),(0,r.yg)("td",{parentName:"tr",align:null},"Array of allowed values"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"enum": ["active", "inactive"]'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"minimum"),"/",(0,r.yg)("inlineCode",{parentName:"td"},"maximum")),(0,r.yg)("td",{parentName:"tr",align:null},"Numeric range constraints"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"minimum": 0, "maximum": 100'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"minLength"),"/",(0,r.yg)("inlineCode",{parentName:"td"},"maxLength")),(0,r.yg)("td",{parentName:"tr",align:null},"String length constraints"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"minLength": 3, "maxLength": 50'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"required")),(0,r.yg)("td",{parentName:"tr",align:null},"Whether the property is mandatory"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"required": true'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"default")),(0,r.yg)("td",{parentName:"tr",align:null},"Default value if none provided"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"default": "pending"'))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"examples")),(0,r.yg)("td",{parentName:"tr",align:null},"Sample valid values"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},'"examples": ["John Smith"]'))))),(0,r.yg)("p",null,"Properties can also have nested objects and arrays with their own validation rules, allowing for complex data structures while maintaining strict validation. See the ",(0,r.yg)("a",{parentName:"p",href:"#nesting-schemas"},"Nesting schema's")," section below for more details."),(0,r.yg)("h2",{id:"example-schema"},"Example Schema"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "person",\n  "title": "Person",\n  "version": "1.0.0",\n  "description": "Schema for representing a person with basic information",\n  "summary": "Basic person information",\n  "required": ["firstName", "lastName", "birthDate"],\n  "properties": {\n    "firstName": {\n      "type": "string",\n      "description": "Person\'s first name"\n    },\n    "lastName": {\n      "type": "string",\n      "description": "Person\'s last name"\n    },\n    "birthDate": {\n      "type": "string",\n      "format": "date",\n      "description": "Person\'s date of birth in ISO 8601 format"\n    },\n    "email": {\n      "type": "string",\n      "format": "email",\n      "description": "Person\'s email address"\n    },\n    "address": {\n      "type": "object",\n      "description": "Person\'s address",\n      "properties": {\n        "street": { "type": "string" },\n        "city": { "type": "string" },\n        "postalCode": { "type": "string" },\n        "country": { "type": "string" }\n      }\n    },\n    "phoneNumbers": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "properties": {\n          "type": { \n            "type": "string",\n            "enum": ["home", "work", "mobile"]\n          },\n          "number": { "type": "string" }\n        }\n      }\n    }\n  },\n  "archive": {},\n  "updated": "2023-04-20T11:25:00Z",\n  "created": "2023-01-05T08:30:00Z"\n}\n')),(0,r.yg)("h2",{id:"schema-use-cases"},"Schema Use Cases"),(0,r.yg)("p",null,"Schemas serve multiple purposes in Open Register:"),(0,r.yg)("h3",{id:"1-data-validation"},"1. Data Validation"),(0,r.yg)("p",null,"Schemas ensure that all data entering the system meets defined requirements, maintaining data quality and consistency."),(0,r.yg)("h3",{id:"2-documentation"},"2. Documentation"),(0,r.yg)("p",null,"Schemas serve as self-documenting specifications for data structures, helping developers understand what data is available and how it's organized."),(0,r.yg)("h3",{id:"3-api-contract"},"3. API Contract"),(0,r.yg)("p",null,"Schemas define the contract between different systems, specifying what data can be exchanged and in what format."),(0,r.yg)("h3",{id:"4-ui-generation"},"4. UI Generation"),(0,r.yg)("p",null,"Schemas can be used to automatically generate forms and other UI elements, ensuring that user interfaces align with data requirements."),(0,r.yg)("h2",{id:"working-with-schemas"},"Working with Schemas"),(0,r.yg)("h3",{id:"creating-a-schema"},"Creating a Schema"),(0,r.yg)("p",null,"To create a new schema, you define its structure and validation rules:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'POST /api/schemas\n{\n  "title": "Product",\n  "version": "1.0.0",\n  "description": "Schema for product information",\n  "required": ["name", "sku", "price"],\n  "properties": {\n    "name": {\n      "type": "string",\n      "description": "Product name"\n    },\n    "sku": {\n      "type": "string",\n      "description": "Stock keeping unit"\n    },\n    "price": {\n      "type": "number",\n      "minimum": 0,\n      "description": "Product price"\n    },\n    "description": {\n      "type": "string",\n      "description": "Product description"\n    },\n    "category": {\n      "type": "string",\n      "description": "Product category"\n    }\n  }\n}\n')),(0,r.yg)("h3",{id:"retrieving-schema-information"},"Retrieving Schema Information"),(0,r.yg)("p",null,"You can retrieve information about a specific schema:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"GET /api/schemas/{id}\n")),(0,r.yg)("p",null,"Or list all available schemas:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"GET /api/schemas\n")),(0,r.yg)("h3",{id:"updating-a-schema"},"Updating a Schema"),(0,r.yg)("p",null,"Schemas can be updated to add new fields, change validation rules, or fix issues:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'PUT /api/schemas/{id}\n{\n  "title": "Product",\n  "version": "1.1.0",\n  "description": "Schema for product information",\n  "required": ["name", "sku", "price"],\n  "properties": {\n    "name": {\n      "type": "string",\n      "description": "Product name"\n    },\n    "sku": {\n      "type": "string",\n      "description": "Stock keeping unit"\n    },\n    "price": {\n      "type": "number",\n      "minimum": 0,\n      "description": "Product price"\n    },\n    "description": {\n      "type": "string",\n      "description": "Product description"\n    },\n    "category": {\n      "type": "string",\n      "description": "Product category"\n    },\n    "tags": {\n      "type": "array",\n      "items": {\n        "type": "string"\n      },\n      "description": "Product tags"\n    }\n  }\n}\n')),(0,r.yg)("h3",{id:"nesting-schemas"},"Nesting schema's"),(0,r.yg)("h3",{id:"schema-versioning"},"Schema Versioning"),(0,r.yg)("p",null,"Open Register supports schema versioning to manage changes over time:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Minor Updates"),": Adding optional fields or relaxing constraints"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Major Updates"),": Adding required fields, removing fields, or changing field types"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Archive"),": Previous versions are stored in the schema's archive property")),(0,r.yg)("h2",{id:"schema-design-best-practices"},"Schema Design Best Practices"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Start Simple"),": Begin with the minimum required fields and add complexity as needed"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Use Clear Names"),": Choose descriptive property names that reflect their purpose"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Add Descriptions"),": Document each property with clear descriptions"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Consider Validation"),": Add appropriate validation rules to ensure data quality"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Think About Relationships"),": Design schemas with relationships in mind"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Plan for Evolution"),": Design schemas to accommodate future changes"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Reuse Common Patterns"),": Create reusable components for common data structures")),(0,r.yg)("h2",{id:"relationship-to-other-concepts"},"Relationship to Other Concepts"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Registers"),": Registers specify which schemas they support"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Objects"),": Objects must conform to a schema to be valid"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Validation"),": The validation engine uses schemas to validate objects")),(0,r.yg)("h2",{id:"conclusion"},"Conclusion"),(0,r.yg)("p",null,"Schemas are the foundation of data quality in Open Register. By defining clear, consistent structures for your data, you ensure that all information in the system meets your requirements and can be reliably used across different applications and processes."))}g.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>m,yg:()=>y});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=p(n),c=r,y=d["".concat(o,".").concat(c)]||d[c]||g[c]||i;return n?a.createElement(y,s(s({ref:t},m),{},{components:n})):a.createElement(y,s({ref:t},m))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=c;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[d]="string"==typeof e?e:r,s[1]=l;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"}}]);